{"file":"p-BBv1qV94.js","mappings":"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","names":["__stencil_proxyCustomElement","HTMLElement","i18n"],"sources":["src/components/attribute-tab/i18n/i18n.js","src/components/attribute-tab/attribute-tab.css?tag=attribute-tab","src/components/attribute-tab/attribute-tab.tsx"],"sourcesContent":["const I18N = {\n  en: {\n    attributes: 'Attribute',\n    type: 'Type',\n    defaultValue: 'Default value',\n    control: 'Control',\n    noType: 'No type specified',\n    noDefaultValue: 'No default value',\n    required: ' (required)',\n  },\n  fr: {\n    attributes: 'Attribut',\n    type: 'Type',\n    defaultValue: 'Valeur par défaut',\n    control: 'Contrôle',\n    noType: 'Aucun type spécifié',\n    noDefaultValue: 'Aucune valeur par défaut',\n    required: ' (obligatoire)',\n  },\n};\n\nexport default I18N;\n",":host {\n  display: block;\n\n  table > tr > td:first-child {\n    font: var(--gcds-label-font-mobile);\n\n    .required {\n      font-weight: var(--gcds-label-required-font-weight);\n    }\n  }\n}\n","import { Component, Host, h, Element, Prop, Event, EventEmitter, State } from '@stencil/core';\n\nimport { AttributesType, assignLanguage, closestElement, formatDataLabel } from '../../utils/utils';\nimport i18n from './i18n/i18n';\n\n@Component({\n  tag: 'attribute-tab',\n  styleUrl: 'attribute-tab.css',\n  shadow: false,\n})\nexport class AttributeTab {\n  @Element() el: HTMLElement;\n\n  private valueChecker: number | null = null;\n  private lastInputValue = {};\n\n  /* ---------------------------\n   * Props\n   * --------------------------- */\n\n  @Prop() attributeObject: Array<AttributesType>;\n  @Prop() displayElement!: Element;\n\n  /* ---------------------------\n   * Events\n   * --------------------------- */\n\n  @Event() attributeChange!: EventEmitter<Object>;\n  @Event() statusUpdate!: EventEmitter<Object>;\n\n  /* ---------------------------\n   * State\n   * --------------------------- */\n\n  @State() lang: string = 'en';\n  @State() lastInputTimestamp = [];\n\n  /* ---------------------------\n   * Helpers\n   * --------------------------- */\n\n  private formatEventDetail(e) {\n    const eventDetail = {\n      name: e.target.name,\n      value: e.target.value,\n    };\n\n    // Store timestamp and value of element for comparison in interval\n    this.lastInputTimestamp[e.target.name] = Date.now();\n    this.lastInputValue[e.target.name] = e.target.value;\n\n    this.attributeChange.emit(eventDetail);\n  }\n\n  private onFocusStartInterval = (e) => {\n    const element = e.target.shadowRoot.querySelector(`[name=\"${e.target.name}\"]`);\n    const value = element.value;\n    const name = element.name;\n    // Start value checking on input\n    this.valueChecker = window.setInterval(() => {\n      if (\n\n        Date.now() - 500 >= this.lastInputTimestamp[name]\n      ) {\n        if (value !== this.lastInputValue[name]) {\n          this.statusUpdate.emit({ name: name, type: 'attribute' });\n          clearInterval(this.valueChecker);\n        }\n      }\n    }, 1000);\n\n  }\n\n  private onBlurClearInterval = () => {\n    if (this.valueChecker) {\n      window.clearInterval(this.valueChecker);\n    }\n  }\n\n  /* ---------------------------\n   * Lifecycle\n   * --------------------------- */\n\n  async componentWillLoad() {\n    // Define lang attribute\n    this.lang = assignLanguage(this.el);\n  }\n\n  /* ---------------------------\n   * Render\n   * --------------------------- */\n\n  render() {\n    const { lang } = this;\n\n    return (\n      <Host role=\"tabpanel\" tabindex=\"0\">\n        <table class=\"attributes\">\n          <tr>\n            <th>{i18n[lang].attributes}</th>\n            <th>{i18n[lang].type}</th>\n            <th>{i18n[lang].defaultValue}</th>\n            <th>{i18n[lang].control}</th>\n          </tr>\n          {this.attributeObject &&\n            this.attributeObject.map(attr => {\n              let control = '';\n\n              let displayValue = this.displayElement.getAttribute(attr.name) != null ? this.displayElement.getAttribute(attr.name) : attr?.defaultValue;\n\n              // Special case for lang attribute to inherit from closest parent with lang attribute\n              if (attr.name === 'lang') {\n                displayValue = closestElement('[lang]', this.displayElement).getAttribute('lang') || displayValue;\n              }\n\n              this.lastInputValue = { ...this.lastInputValue, [attr.name]: displayValue };\n\n              if (attr.control === 'select') {\n                const options = typeof attr.options === 'string' ? JSON.parse(attr.options) : attr.options;\n\n                control = (\n                  <gcds-select\n                    label={attr.name}\n                    selectId={attr.name}\n                    name={attr.name}\n                    value={displayValue}\n                    hide-label\n                    onInput={e => this.formatEventDetail(e)}\n                    onFocus={e => this.onFocusStartInterval(e)}\n                    onBlur={this.onBlurClearInterval}\n                  >\n                    {typeof options === 'object' &&\n                      options.map(option => (\n                        <option key={option} value={option}>\n                          {option}\n                        </option>\n                      ))}\n                  </gcds-select>\n                );\n              } else if (attr.control === 'text') {\n                control = (\n                  <gcds-input\n                    name={attr.name}\n                    label={attr.name}\n                    inputId={attr.name}\n                    hide-label\n                    type=\"text\"\n                    value={displayValue}\n                    onInput={e => this.formatEventDetail(e)}\n                    onFocus={e => this.onFocusStartInterval(e)}\n                    onBlur={this.onBlurClearInterval}\n                  ></gcds-input>\n                );\n              }\n\n              return (\n                <tr>\n                  <td data-label={formatDataLabel(i18n[lang].attributes, lang)}>\n                    <span lang=\"en\">{attr.name}</span>\n                    {attr.required && (\n                      <span\n                        class=\"required\"\n                        aria-hidden=\"true\"\n                      >\n                        {i18n[lang].required}\n                      </span>\n                    )}</td>\n                  <td data-label={formatDataLabel(i18n[lang].type, lang)}>{attr?.type ? <span lang=\"en\">{attr.type}</span> : <gcds-sr-only tag=\"span\">{i18n[lang].noType}</gcds-sr-only>}</td>\n                  <td data-label={formatDataLabel(i18n[lang].defaultValue, lang)}>{attr?.defaultValue ? <span lang=\"en\">{attr.defaultValue}</span> : <gcds-sr-only>{i18n[lang].noDefaultValue}</gcds-sr-only>}</td>\n                  <td>{control}</td>\n                </tr>\n              );\n            })}\n        </table>\n      </Host>\n    );\n  }\n}\n"],"version":3}