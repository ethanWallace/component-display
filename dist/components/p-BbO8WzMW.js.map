{"file":"p-BbO8WzMW.js","mappings":"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","names":[],"sources":["src/utils/utils.ts"],"sourcesContent":["export const assignLanguage = (el: HTMLElement) => {\n  let lang = '';\n  if (!el.getAttribute('lang')) {\n    const closestLangAttribute = closestElement('[lang]', el)?.getAttribute('lang');\n    if (closestLangAttribute == 'en' || !closestLangAttribute) {\n      lang = 'en';\n    } else {\n      lang = 'fr';\n    }\n  } else if (el.getAttribute('lang') == 'en') {\n    lang = 'en';\n  } else {\n    lang = 'fr';\n  }\n\n  return lang;\n};\n\n// Allows use of closest() function across shadow boundaries\nexport const closestElement = (selector, el) => {\n  if (el) {\n    return (el && el != document && typeof window != 'undefined' && el != window && el.closest(selector)) || closestElement(selector, el.getRootNode().host);\n  }\n\n  return null;\n};\n\n// Removes unwanted attributes from display element\nexport const removeUnwantedAttributes = html => {\n  const regex = /\\s*(aria-[a-z-]+|class|(?<!-)\\brole\\b)=\"[^\"]*\"/g;\n  return html.replace(regex, '');\n};\n\nexport type AttributesType = {\n  name: string;\n  control: 'select' | 'text' | 'none';\n  options?: Array<string>;\n  required?: boolean;\n  defaultValue?: string;\n  type?: string;\n  onlyProperty?: boolean;\n};\n\nexport type SlotType = {\n  name: string;\n  description: string;\n};\n\nexport type EventType = {\n  name: string;\n  description: string;\n  details: string | object;\n};\n\nexport const srcDoc = `<!DOCTYPE html>\n<html lang=\"{{lang}}\">\n<head>\n  <meta charset=\"UTF-8\" />\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n  <title>Landmark Elements</title>\n  <link rel=\"stylesheet\" href=\"/components/dist/gcds.css\" />\n  <script type=\"module\" src=\"/components/dist/gcds.esm.js\"></script>\n  <link\n    rel=\"stylesheet\"\n    href=\"https://cdn.design-system.alpha.canada.ca/@gcds-core/css-shortcuts@latest/dist/gcds-css-shortcuts.min.css\"\n  />\n  {{axeScript}}\n</head>\n<body class=\"p-150\">\n  {{displayElement}}\n</body>\n</html>`;\n\nexport const formatSrcDoc = (displayElement: string, accessibility: boolean = false, lang: string = 'en') => {\n  let doc = srcDoc;\n  if (accessibility) {\n    const axeScript = `<script src=\"https://cdn.jsdelivr.net/npm/axe-core@4.7.2/axe.min.js\"></script>`;\n    doc = doc.replace('{{axeScript}}', axeScript);\n  } else {\n    doc = doc.replace('{{axeScript}}', '');\n  }\n  doc = doc.replace('{{lang}}', lang);\n  doc = doc.replace('{{displayElement}}', displayElement);\n\n  return doc;\n};\n\nexport const formatDataLabel = (label: string, lang: string) => {\n  return lang === 'fr' ? `${label} : ` : `${label}:`;\n};\n\n/* ---------------------------\n * Iframe Helpers\n * --------------------------- */\n\nexport const iframeListeners = (iframe: HTMLIFrameElement) => {\n  const resize = new ResizeObserver(() => {\n    setIframeHeight(iframe);\n  });\n\n  resize.observe(iframe.contentDocument.body);\n\n  // Build extra logic to handle opening of nav-groups desktop and mobile versions\n  const handleMutations = mutationsList => {\n    for (const mutation of mutationsList) {\n      if (mutation.target.nodeName == 'GCDS-NAV-GROUP') {\n        if (mutation.target.classList.contains('gcds-mobile-nav')) {\n          const additionalHeight = mutation.target.shadowRoot.querySelector('ul.gcds-nav-group__list')?.getBoundingClientRect().height || 0;\n          // Additional logic to keep body from shrinking\n          iframe.contentDocument.body.style.height = `${additionalHeight / 16 + 7.25}rem`;\n          setIframeHeight(iframe, additionalHeight / 16 + 3);\n        } else if (mutation.target.closest('gcds-top-nav') && iframe.contentWindow.innerWidth <= 1024) {\n          const additionalHeight =\n            mutation.target\n              .closest('gcds-top-nav')\n              .shadowRoot.querySelector('gcds-nav-group.gcds-mobile-nav')\n              .shadowRoot.querySelector('ul.gcds-nav-group__list')\n              ?.getBoundingClientRect().height || 0;\n          iframe.contentDocument.body.style.height = `${additionalHeight / 16 + 7.25}rem`;\n          setIframeHeight(iframe, additionalHeight / 16);\n        } else {\n          const additionalHeight = mutation.target.shadowRoot.querySelector('ul.gcds-nav-group__list')?.getBoundingClientRect().height || 0;\n          iframe.contentDocument.body.style.height = 'auto';\n          setIframeHeight(iframe, additionalHeight / 16);\n        }\n      }\n    }\n  };\n\n  const observer = new MutationObserver(handleMutations);\n\n  // Check for gcds-nav-group inside gcds-top-nav\n  const navGroup = iframe.contentDocument.querySelector('gcds-top-nav > gcds-nav-group');\n\n  if (navGroup) {\n    observer.observe(navGroup, {\n      attributes: true,\n      attributeFilter: ['open'],\n    });\n  }\n\n  // Mobile top-nav and side-nav\n\n  const nav = iframe.contentDocument.querySelector('gcds-top-nav') || iframe.contentDocument.querySelector('gcds-side-nav');\n\n  if (nav) {\n    observer.observe(nav.shadowRoot.querySelector('gcds-nav-group.gcds-mobile-nav'), {\n      attributes: true,\n      attributeFilter: ['open'],\n    });\n  }\n};\n\nconst setIframeHeight = (iframe: HTMLIFrameElement, additional: number = 0) => {\n  iframe.style.setProperty('--component-display-iframe-height', `${iframe.contentDocument.body.getBoundingClientRect().height / 16 + additional + 3}rem`);\n};\n"],"version":3}